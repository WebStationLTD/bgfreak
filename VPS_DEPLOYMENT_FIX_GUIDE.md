# üöÄ –†—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∑–∞ –æ–ø—Ä–∞–≤—è–Ω–µ –Ω–∞ VPS Deployment

## üìã –¢–µ–∫—É—â–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ

- ‚úÖ Vercel deployment —Ä–∞–±–æ—Ç–∏
- ‚ùå VPS deployment —á—Ä–µ–∑ GitHub Actions –Ω–µ —Ä–∞–±–æ—Ç–∏
- ‚ö†Ô∏è –ì—Ä–µ—à–∫–∞: `connection refused` –Ω–∞ –ø–æ—Ä—Ç 22

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–ù–ê–ü–†–ê–í–ò –¢–û–í–ê –ü–™–†–í–û!)

### –°—Ç—ä–ø–∫–∞ 1: –¢–µ—Å—Ç–≤–∞–π SSH –≤—Ä—ä–∑–∫–∞—Ç–∞

–û—Ç–≤–æ—Ä–∏ **PowerShell** –∏–ª–∏ **Command Prompt** –∏ –∏–∑–ø—ä–ª–Ω–∏:

```powershell
ssh bgfreak@101.99.94.10
```

#### –ö–∞–∫–≤–æ –º–æ–∂–µ –¥–∞ —Å–µ —Å–ª—É—á–∏:

**‚úÖ –í–∞—Ä–∏–∞–Ω—Ç –ê: –†–∞–±–æ—Ç–∏**

```
Password:
```

‚Üí –°—É–ø–µ—Ä! SSH —Ä–∞–±–æ—Ç–∏. –ü—Ä–µ–º–∏–Ω–∏ –∫—ä–º **–†–µ—à–µ–Ω–∏–µ 1**.

**‚ùå –í–∞—Ä–∏–∞–Ω—Ç –ë: Connection refused**

```
ssh: connect to host 101.99.94.10 port 22: Connection refused
```

‚Üí SSH –Ω–µ –µ –Ω–∞ –ø–æ—Ä—Ç 22. –ü—Ä–µ–º–∏–Ω–∏ –∫—ä–º **–†–µ—à–µ–Ω–∏–µ 2**.

**‚ùå –í–∞—Ä–∏–∞–Ω—Ç –í: Timeout**

```
ssh: connect to host 101.99.94.10 port 22: Connection timed out
```

‚Üí Firewall –±–ª–æ–∫–∏—Ä–∞ –∏–ª–∏ IP –µ –≥—Ä–µ—à–µ–Ω. –ü—Ä–µ–º–∏–Ω–∏ –∫—ä–º **–†–µ—à–µ–Ω–∏–µ 3**.

**‚ùå –í–∞—Ä–∏–∞–Ω—Ç –ì: Host key verification failed**
‚Üí –ù–µ –µ –ø—Ä–æ–±–ª–µ–º, —Å–∞–º–æ –Ω–∞—Ç–∏—Å–Ω–∏ `yes`

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 1: SSH —Ä–∞–±–æ—Ç–∏ - –ù–∞—Å—Ç—Ä–æ–π SSH –∫–ª—é—á

### –°—Ç—ä–ø–∫–∞ 1.1: –õ–æ–≥–Ω–∏ —Å–µ –Ω–∞ VPS

```bash
ssh bgfreak@101.99.94.10
# –í—ä–≤–µ–¥–∏ –ø–∞—Ä–æ–ª–∞—Ç–∞
```

### –°—Ç—ä–ø–∫–∞ 1.2: –ì–µ–Ω–µ—Ä–∏—Ä–∞–π SSH –∫–ª—é—á –∑–∞ GitHub Actions

```bash
# –°—ä–∑–¥–∞–π .ssh –ø–∞–ø–∫–∞ –∞–∫–æ –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞
mkdir -p ~/.ssh
chmod 700 ~/.ssh

# –ì–µ–Ω–µ—Ä–∏—Ä–∞–π –Ω–æ–≤ SSH –∫–ª—é—á
ssh-keygen -t ed25519 -C "github-actions-deploy" -f ~/.ssh/github_actions -N ""

# –î–æ–±–∞–≤–∏ –ø—É–±–ª–∏—á–Ω–∏—è –∫–ª—é—á –∫—ä–º authorized_keys
cat ~/.ssh/github_actions.pub >> ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys

# –ü–æ–∫–∞–∂–∏ private key (—â–µ –≥–æ –∫–æ–ø–∏—Ä–∞—à –∑–∞ GitHub)
cat ~/.ssh/github_actions
```

**–í–ê–ñ–ù–û:** –ö–æ–ø–∏—Ä–∞–π –¶–ï–õ–ò–Ø private key (–≤–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ `-----BEGIN` –∏ `-----END` —Ä–µ–¥–æ–≤–µ—Ç–µ)!

### –°—Ç—ä–ø–∫–∞ 1.3: –î–æ–±–∞–≤–∏ SSH key –≤ GitHub Secrets

1. –û—Ç–∏–¥–∏ –≤ GitHub Repository
2. **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions**
3. –ù–∞—Ç–∏—Å–Ω–∏ **New repository secret**
4. –°—ä–∑–¥–∞–π —Å–ª–µ–¥–Ω–∏—Ç–µ secrets:

| Name           | Value                          |
| -------------- | ------------------------------ |
| `VPS_HOST`     | `101.99.94.10`                 |
| `VPS_USERNAME` | `bgfreak`                      |
| `VPS_SSH_KEY`  | _Private key-—è—Ç –æ—Ç —Å—Ç—ä–ø–∫–∞ 1.2_ |
| `VPS_PORT`     | `22`                           |

5. –ò–∑—Ç—Ä–∏–π —Å—Ç–∞—Ä–∏—è `VPS_PASSWORD` secret (–≤–µ—á–µ –Ω–µ —Ç–∏ —Ç—Ä—è–±–≤–∞)

### –°—Ç—ä–ø–∫–∞ 1.4: –û–±–Ω–æ–≤–∏ GitHub Actions workflow

–ò–∑–ø–æ–ª–∑–≤–∞–π —Ñ–∞–π–ª–∞ `.github/workflows/deploy-with-key.yml.example` –∫–∞—Ç–æ –Ω–æ–≤ `deploy.yml`

---

## üîß –†–µ—à–µ–Ω–∏–µ 2: SSH –µ –Ω–∞ –¥—Ä—É–≥ –ø–æ—Ä—Ç

–ú–Ω–æ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥ –ø—Ä–æ–≤–∞–π–¥—ä—Ä–∏ –∏–∑–ø–æ–ª–∑–≤–∞—Ç –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω SSH –ø–æ—Ä—Ç (2222, 22022, –∏ —Ç.–Ω.)

### –°—Ç—ä–ø–∫–∞ 2.1: –ù–∞–º–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª–Ω–∏—è –ø–æ—Ä—Ç

–ü—Ä–æ–≤–µ—Ä–∏ –≤:

- Control Panel –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–∞
- Welcome email –æ—Ç —Ö–æ—Å—Ç–∏–Ω–≥–∞
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ VPS –ø—Ä–æ–≤–∞–π–¥—ä—Ä–∞

–ò–ª–∏ –æ–ø–∏—Ç–∞–π —á–µ—Å—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–∏ –ø–æ—Ä—Ç–æ–≤–µ:

```bash
ssh -p 2222 bgfreak@101.99.94.10
ssh -p 22022 bgfreak@101.99.94.10
ssh -p 2022 bgfreak@101.99.94.10
```

### –°—Ç—ä–ø–∫–∞ 2.2: –û–±–Ω–æ–≤–∏ workflow

–°–ª–µ–¥ –∫–∞—Ç–æ –Ω–∞–º–µ—Ä–∏—à –ø–æ—Ä—Ç–∞, –æ–±–Ω–æ–≤–∏ GitHub Secret `VPS_PORT` —Å –ø—Ä–∞–≤–∏–ª–Ω–∞—Ç–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç.

---

## üåê –†–µ—à–µ–Ω–∏–µ 3: IP –∞–¥—Ä–µ—Å—ä—Ç –µ –≥—Ä–µ—à–µ–Ω –∏–ª–∏ Firewall –±–ª–æ–∫–∏—Ä–∞

### –°—Ç—ä–ø–∫–∞ 3.1: –ü—Ä–æ–≤–µ—Ä–∏ IP –∞–¥—Ä–µ—Å–∞

–õ–æ–≥–Ω–∏ —Å–µ –≤ control panel –Ω–∞ VPS —Ö–æ—Å—Ç–∏–Ω–≥–∞ –∏ –≤–∏–∂ –∫–∞–∫—ä–≤ –µ —Ç–æ—á–Ω–∏—è—Ç IP –∞–¥—Ä–µ—Å.

### –°—Ç—ä–ø–∫–∞ 3.2: –ü—Ä–æ–≤–µ—Ä–∏ Firewall

–ê–∫–æ –∏–º–∞—à –¥–æ—Å—Ç—ä–ø –¥–æ VPS control panel:

1. –û—Ç–∏–¥–∏ –≤ **Firewall Settings**
2. –ü—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ –ø–æ—Ä—Ç 22 (–∏–ª–∏ SSH –ø–æ—Ä—Ç–∞) –µ –æ—Ç–≤–æ—Ä–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ –∏–º–∞ IP whitelist (GitHub Actions –∏–∑–ø–æ–ª–∑–≤–∞—Ç –¥–∏–Ω–∞–º–∏—á–Ω–∏ IP-—Ç–∞)

### –°—Ç—ä–ø–∫–∞ 3.3: GitHub Actions IP Range (–ê–∫–æ –∏–º–∞ firewall whitelist)

GitHub Actions –∏–∑–ø–æ–ª–∑–≤–∞—Ç –¥–∏–Ω–∞–º–∏—á–Ω–∏ IP –∞–¥—Ä–µ—Å–∏. –ò–º–∞ 2 –≤–∞—Ä–∏–∞–Ω—Ç–∞:

**–í–∞—Ä–∏–∞–Ω—Ç A:** –ü–æ–∑–≤–æ–ª–∏ –≤—Å–∏—á–∫–∏ GitHub IP-—Ç–∞ (–≤–∏–∂ https://api.github.com/meta)

**–í–∞—Ä–∏–∞–Ω—Ç –ë:** –ò–∑–ø–æ–ª–∑–≤–∞–π deploy –ø—Ä–µ–∑ SSH tunnel –∏–ª–∏ VPN

---

## üéØ –ê–ª—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏ –º–µ—Ç–æ–¥–∏ –∑–∞ deployment

### –ú–µ—Ç–æ–¥ 1: –†—ä—á–µ–Ω Git Pull –Ω–∞ VPS

–ê–∫–æ GitHub Actions –Ω–µ –ø—Ä–æ—Ä–∞–±–æ—Ç–∏, –º–æ–∂–µ—à –¥–∞:

1. –õ–æ–≥–Ω–∏ —Å–µ –Ω–∞ VPS
2. Navigate –∫—ä–º project –ø–∞–ø–∫–∞—Ç–∞:

```bash
cd /home/bgfreak/public_html
```

3. Pull –ø—Ä–æ–º–µ–Ω–∏—Ç–µ:

```bash
git pull origin master
npm install
npm run generate
```

### –ú–µ—Ç–æ–¥ 2: FTP/SFTP Upload

–ò–∑–ø–æ–ª–∑–≤–∞–π FileZilla –∏–ª–∏ –¥—Ä—É–≥ FTP –∫–ª–∏–µ–Ω—Ç:

1. Build –ª–æ–∫–∞–ª–Ω–æ: `npm run generate`
2. Upload –ø–∞–ø–∫–∞—Ç–∞ `.output/public/` –∫—ä–º `/home/bgfreak/public_html/`

### –ú–µ—Ç–æ–¥ 3: Deploy Hook –æ—Ç —Ö–æ—Å—Ç–∏–Ω–≥ –ø–∞–Ω–µ–ª–∞

–ú–Ω–æ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥ –ø—Ä–æ–≤–∞–π–¥—ä—Ä–∏ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç **Git Deploy Hooks**:

1. –û—Ç–∏–¥–∏ –≤ cPanel/Plesk/Custom Panel
2. –ù–∞–º–µ—Ä–∏ "Git Version Control" –∏–ª–∏ "Deploy Hooks"
3. –î–æ–±–∞–≤–∏ GitHub repo URL
4. –ù–∞—Å—Ç—Ä–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ–Ω deploy –ø—Ä–∏ push

---

## üîÑ –°–ª–µ–¥ –æ–ø—Ä–∞–≤—è–Ω–µ—Ç–æ

–°–ª–µ–¥ –∫–∞—Ç–æ –æ–ø—Ä–∞–≤–∏—à SSH –≤—Ä—ä–∑–∫–∞—Ç–∞ –∏ –æ–±–Ω–æ–≤–∏—à workflow-–∞:

1. Commit –∏ push –ø—Ä–æ–º–µ–Ω–∏—Ç–µ
2. –û—Ç–∏–¥–∏ –≤ GitHub ‚Üí Actions tab
3. –í–∏–∂ –¥–∞–ª–∏ workflow-—ä—Ç –º–∏–Ω–∞–≤–∞ —É—Å–ø–µ—à–Ω–æ
4. –ü—Ä–æ–≤–µ—Ä–∏ —Å–∞–π—Ç–∞ –Ω–∞ VPS –¥–∞–ª–∏ –µ –æ–±–Ω–æ–≤–µ–Ω

---

## üìû –ù—É–∂–Ω–∞ –ª–∏ —Ç–∏ –µ –ø–æ–º–æ—â?

–ö–∞–∂–∏ –º–∏:

1. –ö–∞–∫–≤–æ –ø–æ–ª—É—á–∏ –ø—Ä–∏ —Ç–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ SSH –≤—Ä—ä–∑–∫–∞—Ç–∞ (–í–∞—Ä–∏–∞–Ω—Ç –ê, –ë, –í –∏–ª–∏ –ì)?
2. –ò–º–∞—à –ª–∏ –¥–æ—Å—Ç—ä–ø –¥–æ VPS control panel?
3. –ö–∞–∫—ä–≤ —Ö–æ—Å—Ç–∏–Ω–≥ –ø—Ä–æ–≤–∞–π–¥—ä—Ä –∏–∑–ø–æ–ª–∑–≤–∞—à?

–ò —â–µ –ø—Ä–æ–¥—ä–ª–∂–∞ —Å—ä—Å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ —Ç–≤–æ—è —Å–ª—É—á–∞–π! üöÄ
